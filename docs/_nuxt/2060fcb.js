(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1961:function(e,t,n){},1962:function(e,t,n){},1968:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(65);var r=n(17),o=n(18),c=n(26),l=n(27),d=n(14),h=(n(328),n(42),n(80)),f=n(8);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var v=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"name",get:function(){return"Token ".concat(this.token_id)}},{key:"img_url",get:function(){return this.image_url?this.image_url:""}},{key:"category",get:function(){var e=this;return f.a.vuexStore.getters["category/categories"].find((function(t){return t.getAddress(e.chainId).toLowerCase()===e.contract.toLowerCase()}))}},{key:"categories_id",get:function(){return this.category.id}},{key:"token",get:function(){return{contract:this.contract,token_id:this.token_id,name:this.name,owner:this.owner,img_url:this.img_url,attributes_metadata:this.attributes?"string"==typeof this.attributes?JSON.parse(this.attributes):this.attributes:[]}}}]),n}(h.a)},2012:function(e,t,n){"use strict";n(66),n(46),n(56),n(83),n(84),n(65);var r,o=n(3),c=n(17),l=n(18),d=n(26),h=n(27),f=n(14),m=n(34),v=(n(30),n(28),n(87),n(88),n(227),n(181),n(328),n(42),n(2)),k=n(55),y=n(67),_=n(180),w=n(228),x=n(52),T=n.n(x),C=n(1),O=n.n(C),A=n(8),j=n(72),E=n(13),S=n(1830),P=n(1966),R=n(81),D=n(2013),I=(n(1974),n(1975)),N=n(1831);n(151);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function M(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var U=n(1877).getTypedData,$=n(1859),Y=$.ContractWrappers,V=$.ERC721TokenContract,B=($.OrderStatus,n(1959)),H=B.generatePseudoRandomSalt,X=B.signatureUtils,W=(n(1788).Web3Wrapper,{ONE_WEEK:0,ONE_MONTH:1,CUSTOM:2}),J=Object(E.a)(0),K=(Object(E.a)(10),Object(k.a)({props:{nftToken:{type:Object,required:!0},close:{type:Function,required:!0},refreshNFTTokens:{type:Function,required:!1,default:function(){}}},components:{InputToken:P.a,ApproveProcess:D.a,Textfield:I.Textfield},computed:F(F(F(F(F({},Object(y.b)("token",["selectedERC20Token"])),Object(y.b)("account",["account"])),Object(y.b)("auth",["user"])),Object(y.b)("network",["networks","networkMeta"])),Object(y.b)("category",["categories"])),methods:{},mixins:[S.a]})(r=function(e){Object(d.a)(x,e);var t,n,r,h,f,m,v,k,y=L(x);function x(){var e;Object(c.a)(this,x);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=y.call.apply(y,[this].concat(n))).activeTab=0,e.duration=0,e.negotiation=!1,e.isLoading=!1,e.dirty=!1,e.error="",e.expiry_date_time="",e.auction_time=O()().format("HH:mm"),e.auction_date=O()().add(1,"days").format("YYYY-MM-DD"),e.minimumDate=e.auction_date,e.showApproveModal=!1,e.isApprovedStatus=!1,e.isSignedStatus=!1,e.approveLoading=!1,e.signLoading=!1,e.showNetworkChangeNeeded=!1,e.approvalModalText={approve:{title:"Approve",subText:"Approve 0x contract to transfer your NFT"},sign:{title:"Sign sell order",subText:"Sign sell transaction"}},e.price=0,e.minPrice=0,e.pricePerUnit=0,e.minPricePerUnit=0,e.erc1155Amount=null,e.tabs=[{id:0,title:"List NFT for Sale",subtitle:e.isErc1155?"Set price per Unit":"Set price",description:e.isErc1155?"Your asset will be sold at this price for 1 unit. It will be available for sale in marketplace until you cancel it.":"Your asset will be sold at this price. It will be available for sale in marketplace until you cancel it.",commission:"",btnTitle:"List for Sale"}],e}return Object(l.a)(x,[{key:"mounted",value:function(){this.changeDuration(this.EXPIRY_DURATION.ONE_WEEK),this.$logger.track("mounted:sell-token",this.nftToken)}},{key:"changeTab",value:function(e){this.activeTab=e}},{key:"handleERC1155Amount",value:function(input){this.dirty=!1,this.erc1155Amount=input}},{key:"toCustom",value:function(){this.duration!==this.EXPIRY_DURATION.CUSTOM&&this.changeDuration(W.CUSTOM)}},{key:"onAuctionDateTimeChange",value:function(){return this.expiry_date_time=O()("".concat(this.auction_date," ").concat(this.auction_time)),!1}},{key:"changeDuration",value:function(e){var t;this.duration=e,t=e===this.EXPIRY_DURATION.ONE_WEEK?O()().add(7,"days"):e===this.EXPIRY_DURATION.ONE_MONTH?O()().add(30,"days"):O()().add(15,"days"),this.auction_date=t.format("YYYY-MM-DD"),this.auction_time=t.format("HH:mm")}},{key:"changePrice",value:function(e){this.dirty=!1,this.price=e}},{key:"changePricePerUnit",value:function(e){this.dirty=!1,this.pricePerUnit=e}},{key:"changeMinPrice",value:function(e){this.dirty=!1,this.minPrice=e}},{key:"changeMinPricePerUnit",value:function(e){this.dirty=!1,this.minPricePerUnit=e}},{key:"closeApproveModal",value:function(){this.showApproveModal=!1,this.close()}},{key:"convertPriceToUSD",value:function(e){var t=null;return this.selectedERC20Token&&(t=new E.a(Object(R.a)(e,this.selectedERC20Token.decimal)).times(new E.a(this.selectedERC20Token.usd)).toString(10)),t}},{key:"isErc1155",get:function(){return"ERC1155"===this.nftToken.type}},{key:"isErc721",get:function(){return"ERC721"===this.nftToken.type}},{key:"approveStatus",value:(k=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.approveLoading=!0,e.prev=1,t=this.nftToken.category.getAddress(this.networks.matic.chainId),n=this.account.address,r=this.networks.matic.chainId,o=new Y(Object(N.a)(),{chainId:r}),!this.isErc1155){e.next=14;break}return l=new T.a(this.networks.matic.rpc),d=new l.eth.Contract(this.networkMeta.abi("ChildERC1155","pos"),t),e.next=11,d.methods.isApprovedForAll(n,o.contractAddresses.erc1155Proxy).call();case 11:c=e.sent,e.next=18;break;case 14:return h=new V(t,Object(N.a)()),e.next=17,h.isApprovedForAll(n,o.contractAddresses.erc721Proxy).callAsync();case 17:c=e.sent;case 18:this.isApprovedStatus=c,this.approveLoading=!1,e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0),this.approveLoading=!1,Object(w.c)(e.t0,null,"Something went wrong");case 27:case"end":return e.stop()}}),e,this,[[1,22]])}))),function(){return k.apply(this,arguments)})},{key:"approveClickedFunc",value:(v=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d,h,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showNetworkChangeNeeded=!1,this.approveLoading=!0,e.prev=2,this.$logger.track("approval-start:sell-token"),O()().add(365,"days").format("x"),this.expiry_date_time&&this.expiry_date_time.format("x"),this.orderType,t=this.nftToken.category.getAddress(this.networks.matic.chainId),this.selectedERC20Token.address,n=this.account.address,r=this.networks.matic.chainId,o=new Y(Object(N.a)(),{chainId:r}),this.nftToken.token_id,c=new E.a(1),l=null,d=null,f=!1,!this.isErc721){e.next=33;break}return this.price.toString(10),this.minPrice,h=new V(t,Object(N.a)()),console.log(h),this.$logger.track("approve0x-721-start:sell-token"),e.next=29,this.approve0x(h,o,n);case 29:f=e.sent,this.$logger.track("approve0x-721-complete:sell-token",{isApproved:f}),e.next=45;break;case 33:return l=new E.a(this.pricePerUnit),c.times(l).toString(10),d=this.minPricePerUnit,c.times(new E.a(d)).toString(10),m=new T.a(this.networks.matic.rpc),v=new m.eth.Contract(this.networkMeta.abi("ChildERC1155","pos"),t),console.log(v),this.$logger.track("approve0x-1155-start:sell-token"),e.next=43,this.approve0x(v,o,n);case 43:f=e.sent,this.$logger.track("approve0x-1155-complete:sell-token",{isApproved:f});case 45:this.isApprovedStatus=f,this.approveLoading=!1,e.next=54;break;case 49:e.prev=49,e.t0=e.catch(2),console.log(e.t0),this.approveLoading=!1,Object(w.c)(e.t0,null,"Something went wrong");case 54:case"end":return e.stop()}}),e,this,[[2,49]])}))),function(){return v.apply(this,arguments)})},{key:"signClickedFunc",value:(m=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d,h,f,m,v,k,y,_,x,T,C,j,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.signLoading=!0,this.$logger.track("sign-start:sell-token"),e.prev=2,t=O()().add(365,"days").format("x"),n=this.expiry_date_time?this.expiry_date_time.format("x"):0,r=this.orderType,o=this.nftToken.category.getAddress(this.networks.matic.chainId),c=this.selectedERC20Token.address,l=this.account.address,d=this.networks.matic.chainId,h=this.nftToken.token_id,f=new Y(Object(N.a)(),{chainId:d}),m=new E.a(1),v=null,k=null,y=null,_=null,e.next=23,f.devUtils.encodeERC20AssetData(c).callAsync();case 23:if(x=e.sent,!this.isErc1155){e.next=34;break}return k=new E.a(this.pricePerUnit),v=m.times(k).toString(10),y=this.minPricePerUnit,m.times(new E.a(y)).toString(10),e.next=31,f.devUtils.encodeERC1155AssetData(o,[new E.a(h)],[new E.a(this.erc1155Amount)],"0x").callAsync();case 31:_=e.sent,e.next=39;break;case 34:return v=this.price.toString(10),this.minPrice,e.next=38,f.devUtils.encodeERC721AssetData(o,new E.a(h)).callAsync();case 38:_=e.sent;case 39:if(T=f.contractAddresses.exchange,C=new E.a(t),r===A.a.orderTypes.AUCTION&&(C=new E.a(n)),j={chainId:d,exchangeAddress:T,makerAddress:l,takerAddress:A.a.uiconfig.NULL_ADDRESS,senderAddress:A.a.uiconfig.NULL_ADDRESS,feeRecipientAddress:A.a.uiconfig.NULL_ADDRESS,expirationTimeSeconds:C,salt:H(),makerAssetAmount:m,takerAssetAmount:v,makerAssetData:_,takerAssetData:x,makerFeeAssetData:A.a.uiconfig.NULL_BYTES,takerFeeAssetData:A.a.uiconfig.NULL_BYTES,makerFee:J,takerFee:J},S="",r!==A.a.orderTypes.FIXED){e.next=49;break}return this.$logger.track("sign-fixed-order-start:sell-token"),e.next=48,X.ecSignOrderAsync(Object(N.a)(),j,l);case 48:S=e.sent;case 49:return j.orderType=r,j.expiry_date_time=n,this.$logger.track("handle-sign-server:sell-token"),e.next=54,this.handleSellSign(j,S);case 54:this.$logger.track("sign-success:sell-token"),e.next=62;break;case 57:e.prev=57,e.t0=e.catch(2),console.log(e.t0),this.signLoading=!1,Object(w.c)(e.t0,null,"Something went wrong");case 62:case"end":return e.stop()}}),e,this,[[2,57]])}))),function(){return m.apply(this,arguments)})},{key:"submitToMarketplace",value:(f=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,this.$logger.track("submit-to-marketplace:sell-token"),this.isValid){e.next=6;break}return this.dirty=!0,this.isLoading=!1,e.abrupt("return");case 6:if(!this.isErc1155){e.next=11;break}if(this.validation.erc1155Amount){e.next=11;break}return this.dirty=!0,this.isLoading=!1,e.abrupt("return");case 11:if(this.$logger.track("submit-to-marketplace-validation-complete:sell-token"),this.dirty=!1,e.prev=13,!this.isErc721){e.next=28;break}return t=this.nftToken.category.getAddress(this.networks.matic.chainId),n=this.nftToken.token_id,r=new V(t,Object(N.a)()),e.next=20,r.ownerOf(new E.a(n)).callAsync();case 20:if((o=e.sent).toLowerCase()===this.account.address.toLowerCase()){e.next=28;break}return this.$logger.track("submit-to-marketplace-not-token-owner:sell-token",{nftToken:nftToken,owner:o,address:this.account.address}),A.a.addToast("You are no owner of this token","You are no longer owner of this token, refresh to update the data",{type:"failure"}),this.isLoading=!1,this.close(),e.abrupt("return");case 28:this.showApproveModal=!0,this.approveStatus(),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(13),console.error(e.t0),Object(w.c)(e.t0,null,"Something went wrong");case 36:this.isLoading=!1;case 37:case"end":return e.stop()}}),e,this,[[13,32]])}))),function(){return f.apply(this,arguments)})},{key:"metamaskValidation",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T.a(window.ethereum),e.next=3,t.eth.getChainId();case 3:if(e.sent===this.networks.matic.chainId){e.next=8;break}return this.error="selectMatic",this.showNetworkChangeNeeded=!0,e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"approve0x",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c,l,d,h,f,m,v,data,k,y,_,x=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new T.a(this.networks.matic.rpc),l=this.nftToken.category.getAddress(this.networks.matic.chainId),!this.isErc721){e.next=8;break}return e.next=5,t.isApprovedForAll(r,n.contractAddresses.erc721Proxy).callAsync();case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,t.methods.isApprovedForAll(r,n.contractAddresses.erc1155Proxy).call();case 10:c=e.sent;case 11:if(c){e.next=72;break}if(this.category.isMetaTx){e.next=47;break}return e.next=15,this.metamaskValidation();case 15:if(e.sent){e.next=18;break}return this.isLoading=!1,e.abrupt("return",!1);case 18:if(!this.isErc721){e.next=35;break}return e.prev=19,e.next=22,t.setApprovalForAll(n.contractAddresses.erc721Proxy,!0).sendTransactionAsync({from:r,gas:1e5});case 22:if(!(d=e.sent)){e.next=27;break}return console.log("Approve Hash",d),A.a.addToast("Approved successfully","You successfully approved the token to put on sale",{type:"success"}),e.abrupt("return",!0);case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(19),console.log(e.t0),e.t0.message.includes("MetaMask is having trouble connecting to the network")?Object(w.c)(e.t0,null,"Please Try Again"):A.a.addToast("Failed to approve","You need to approve the transaction to sale the NFT",{type:"failure"});case 33:e.next=45;break;case 35:return h=new T.a(window.ethereum),f=new h.eth.Contract(this.networkMeta.abi("ChildERC1155","pos"),l),e.next=39,f.methods.setApprovalForAll(n.contractAddresses.erc1155Proxy,!0).send({from:r,gas:1e5});case 39:if(!(m=e.sent)){e.next=44;break}return console.log("Approve Hash",m),A.a.addToast("Approved successfully","You successfully approved the token to put on sale",{type:"success"}),e.abrupt("return",!0);case 44:A.a.addToast("Failed to approve","You need to approve the transaction to sale the NFT",{type:"failure"});case 45:e.next=71;break;case 47:return v=this.isErc1155?n.contractAddresses.erc1155Proxy:n.contractAddresses.erc721Proxy,e.next=50,o.eth.abi.encodeFunctionCall({name:"setApprovalForAll",type:"function",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}]},[v,!0]);case 50:return data=e.sent,e.next=53,this.executeMetaTx(data);case 53:if(k=e.sent,y=k.sig,!(_={intent:y,fnSig:data,from:this.account.address,contractAddress:o.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===x.networks.matic.chainId})).address)})){e.next=71;break}return e.prev=57,e.next=60,Object(j.a)().post("orders/executeMetaTx",_);case 60:if(200!==e.sent.status){e.next=65;break}return console.log("Approved"),A.a.addToast("Approved","You successfully approved",{type:"success"}),e.abrupt("return",!0);case 65:e.next=71;break;case 67:e.prev=67,e.t1=e.catch(57),console.log(e.t1),A.a.addToast("Failed to approve","You need to approve the transaction to sale the NFT",{type:"failure"});case 71:return e.abrupt("return",!1);case 72:return e.abrupt("return",!0);case 73:case"end":return e.stop()}}),e,this,[[19,29],[57,67]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"executeMetaTx",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,address,data,r,o,c,l,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new T.a(this.networks.matic.rpc),address=n.utils.toChecksumAddress(this.account.address),e.next=4,n.eth.abi.encodeFunctionCall({name:"getNonce",type:"function",inputs:[{name:"user",type:"address"}]},[address]);case 4:return data=e.sent,e.next=7,n.eth.call({to:n.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===d.networks.matic.chainId})).address),data:data});case 7:return r=e.sent,o=U({name:this.category.name,version:"1",salt:A.a.uiconfig.SALT,verifyingContract:n.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===d.networks.matic.chainId})).address),nonce:parseInt(r),from:address,functionSignature:t}),c=[address,JSON.stringify(o)],e.next=12,window.ethereum.request({method:"eth_signTypedData_v3",params:c});case 12:return l=e.sent,e.abrupt("return",{sig:l});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleSellSign",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(data,t){var n,r,o,c,l,d,h,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={type:data.orderType,chain_id:"".concat(this.networks.matic.chainId)}).type===A.a.orderTypes.FIXED?(n.maker_address=this.user.id,n.maker_token=this.nftToken.categories_id,n.maker_token_id=this.nftToken.token_id,n.taker_token=this.selectedERC20Token.id,n.signature=JSON.stringify(t),n.usd_price=this.priceInUSD.toString(),n.token_type=this.nftToken.type,this.isErc1155?(r=new E.a(this.pricePerUnit),o=new E.a(this.erc1155Amount),c=o.times(r).toString(10),n.price_per_unit=Object(R.a)(this.pricePerUnit,this.selectedERC20Token.decimal).toString(10),n.price=Object(R.a)(c,this.selectedERC20Token.decimal).toString(10),n.quantity=this.erc1155Amount.toString(10)):n.price=Object(R.a)(this.price,this.selectedERC20Token.decimal).toString(10)):n.type===A.a.orderTypes.NEGOTIATION?(n.taker_address=this.user.id,n.taker_token=this.nftToken.categories_id,n.taker_token_id=this.nftToken.token_id,n.maker_token=this.selectedERC20Token.id,n.token_type=this.nftToken.type,n.usd_price=this.priceInUSD.toString(),this.isErc1155?(l=new E.a(this.pricePerUnit),d=new E.a(this.minPricePerUnit),h=new E.a(this.erc1155Amount),f=h.times(l).toString(10),m=h.times(d).toString(10),n.price_per_unit=Object(R.a)(this.pricePerUnit,this.selectedERC20Token.decimal).toString(10),n.price=Object(R.a)(f,this.selectedERC20Token.decimal).toString(10),n.min_price_per_unit=Object(R.a)(this.minPricePerUnit,this.selectedERC20Token.decimal).toString(10),n.min_price=Object(R.a)(m,this.selectedERC20Token.decimal).toString(10),n.quantity=this.erc1155Amount.toString(10)):(n.price=Object(R.a)(this.price,this.selectedERC20Token.decimal).toString(10),n.min_price=Object(R.a)(this.minPrice,this.selectedERC20Token.decimal).toString(10))):n.type===A.a.orderTypes.AUCTION&&(n.taker_address=this.user.id,n.taker_token=this.nftToken.categories_id,n.taker_token_id=this.nftToken.token_id,n.expiry_date=data.expiry_date_time,n.maker_token=this.selectedERC20Token.id,n.min_price=Object(R.a)(this.price,this.selectedERC20Token.decimal).toString(10)),e.prev=2,e.next=5,Object(j.a)().post("orders",n);case 5:200===e.sent.status&&(this.refreshNFTTokens(),A.a.addToast("Sell order added successfully","Your NFT successfully added on sale",{type:"success"}),this.$store.dispatch("account/fetchActiveOrders"),this.isSignedStatus=!0,this.signLoading=!1,this.close()),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),A.a.addToast("Sell order failed to add","Failed to add you NFT on sale",{type:"failure"}),this.isSignedStatus=!1;case 14:this.$store.dispatch("category/fetchCategories");case 15:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,n){return t.apply(this,arguments)})},{key:"validation",get:function(){return{owner:this.nftToken.owner.toLowerCase()===this.account.address.toLowerCase(),price:!this.isErc721||!!this.price&&this.price.gt(J),pricePerUnit:!this.isErc1155||!!this.pricePerUnit&&this.pricePerUnit.gt(J),minPrice:!this.negotiation||!this.isErc721||!!this.minPrice&&this.minPrice.lt(this.price)&&this.minPrice.gt(J),minPricePerUnit:!this.negotiation||!this.isErc1155||!!this.minPricePerUnit&&this.minPricePerUnit.lt(this.pricePerUnit)&&this.minPricePerUnit.gt(J),erc1155Amount:!this.isErc1155||new E.a(this.erc1155Amount).lte(new E.a(this.nftToken.amount))&&new E.a(parseFloat(this.erc1155Amount)).eq(new E.a(parseInt(this.erc1155Amount)))&&new E.a(parseInt(this.erc1155Amount)).gt(J)}}},{key:"EXPIRY_DURATION",get:function(){return W}},{key:"orderType",get:function(){return 0===this.activeTab&&this.negotiation?A.a.orderTypes.NEGOTIATION:0!==this.activeTab||this.negotiation?1===this.activeTab?A.a.orderTypes.AUCTION:void 0:A.a.orderTypes.FIXED}},{key:"category",get:function(){var e=this;return this.categories.find((function(t){return t.address.toLowerCase()===e.nftToken.contract.toLowerCase()}))}},{key:"priceInUSD",get:function(){var e;if(this.isErc721)e=this.convertPriceToUSD(this.price);else{var t=new E.a(this.pricePerUnit),n=new E.a(this.erc1155Amount).times(t).toString(10);e=this.convertPriceToUSD(n)}return isNaN(e)?0:e}},{key:"priceInUSDFormatted",get:function(){var e=null;if(this.isErc1155){var t=new E.a(this.pricePerUnit),n=new E.a(this.erc1155Amount);e=this.convertPriceToUSD(t.times(n).toString(10))}else e=this.convertPriceToUSD(this.price);return isNaN(e)?"$0":Object(_.b)(e)}},{key:"minPriceInUSDFormatted",get:function(){var e=null;if(this.isErc1155){var t=new E.a(this.minPricePerUnit),n=new E.a(this.erc1155Amount);e=this.convertPriceToUSD(t.times(n).toString(10))}else e=this.convertPriceToUSD(this.minPrice);return isNaN(e)?"$0":Object(_.b)(e)}}]),x}(v.default))||r),Q=K,G=(n(2125),n(23)),component=Object(G.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section position-absolute"},[e.showApproveModal?e._e():n("div",{staticClass:"modal-backdrop show"}),e._v(" "),e.showApproveModal?e._e():n("div",{staticClass:"modal transaction-prog-modal show"},[n("div",{staticClass:"modal-dialog w-sm-100 align-self-center",attrs:{role:"document"}},[n("div",{staticClass:"box in-process-box"},[n("div",{staticClass:"box-body"},[n("div",{staticClass:"container-fluid"},[n("nav",{staticClass:"row tabs nav bottom-border no-border-radius d-flex col-md-12 px-0 mx-0"},e._l(e.tabs,(function(t){return n("a",{key:t.id,staticClass:"nav-item col ps-y-24 px-0 text-center nav-link font-body-medium",class:{"active font-medium":e.activeTab===t.id},on:{click:function(n){return n.preventDefault(),e.changeTab(t.id)}}},[e._v(e._s(t.title))])})),0),e._v(" "),n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 bottom-border d-flex"},[e.isErc1155?n("div",{staticClass:"d-flex align-self-center ps-b-8"},[n("div",{staticClass:"align-self-center font-heading-small font-semibold"},[e._v("\n                  Enter Quantity to sale\n                ")])]):e._e(),e._v(" "),e.isErc1155?n("div",{staticClass:"d-flex ml-auto align-self-center ps-b-8"},[n("div",{staticClass:"font-body-small text-gray-500 ms-l-4"},[e._v("\n                  Available : "+e._s(e.nftToken.amount)+"\n                ")])]):e._e(),e._v(" "),e.isErc1155?n("div",{staticClass:"col-md-12 p-0"},[e.isErc1155?n("Textfield",{attrs:{type:"text",placeholder:"0",value:e.erc1155Amount,disabled:e.isLoading},on:{input:e.handleERC1155Amount}}):e._e(),e._v(" "),e.isErc1155&&e.dirty&&!e.validation.erc1155Amount?n("div",{staticClass:"w-100 font-caption error-text ps-t-12"},[e._v("\n                  Valid quantity is required\n                ")]):e._e(),e._v(" "),n("br")],1):e._e(),e._v(" "),n("div",{staticClass:"col-md-12 px-0 font-heading-small font-semibold ps-b-8"},[e._v("\n                "+e._s(e.tabs[e.activeTab].subtitle)+"\n              ")]),e._v(" "),n("div",{staticClass:"col-md-12 px-0 ps-b-16 font-body-small text-gray-500"},[e._v("\n                "+e._s(e.tabs[e.activeTab].description)+"\n              ")]),e._v(" "),n("div",{staticClass:"col-md-12 p-0"},[e.isErc721?n("input-token",{attrs:{placeholder:"0.00",integer:!0,change:e.changePrice,disableToken:e.isLoading,disabled:e.isLoading}}):e._e(),e._v(" "),e.isErc1155?n("input-token",{attrs:{placeholder:"0.00",integer:!0,change:e.changePricePerUnit,disableToken:e.isLoading,disabled:e.isLoading}}):e._e()],1),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"d-flex ml-auto align-self-center"},[n("div",{staticClass:"font-body-small font-semibold text-gray-500 ms-l-4 ps-t-12"},[e._v("\n                  "+e._s(e.priceInUSDFormatted)+"\n                ")])]),e._v(" "),n("div",{staticClass:"col-md-12 p-0"},[!e.dirty||(e.isErc721?e.validation.price:e.validation.pricePerUnit)?e._e():n("div",{staticClass:"w-100 font-caption error-text ps-t-12"},[e._v("\n                  Valid amount required\n                ")])])]),e._v(" "),0===e.activeTab?n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 bottom-border d-flex"},[n("div",{staticClass:"d-flex align-self-center"},[n("div",{staticClass:"align-self-center font-heading-small font-semibold"},[e._v("\n                  Allow Negotiation?\n                ")]),e._v(" "),n("svg-sprite-icon",{staticClass:"icon ms-l-4",attrs:{name:"questionmark-black"}})],1),e._v(" "),n("div",{staticClass:"d-flex ml-auto align-self-center"},[n("label",{staticClass:"switch align-self-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.negotiation,expression:"negotiation"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.negotiation)?e._i(e.negotiation,null)>-1:e.negotiation},on:{change:function(t){var n=e.negotiation,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&(e.negotiation=n.concat([null])):c>-1&&(e.negotiation=n.slice(0,c).concat(n.slice(c+1)))}else e.negotiation=o}}}),e._v(" "),n("span",{staticClass:"slider round"})])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.negotiation?n("div",{staticClass:"col-md-12 p-0"},[e.isErc721?n("div",{staticClass:"w-100 font-body-small ps-y-12 text-gray-500"},[e._v("\n                    Set minimum price\n                  ")]):n("div",{staticClass:"w-100 font-body-small ps-y-12 text-gray-500"},[e._v("\n                    Set minimum price per unit\n                  ")]),e._v(" "),n("div",{staticClass:"w-100 p-0"},[e.isErc721?n("input-token",{attrs:{placeholder:"0.00",integer:!0,change:e.changeMinPrice,disableToken:!0,disabled:e.isLoading}}):e._e(),e._v(" "),e.isErc1155?n("input-token",{attrs:{placeholder:"0.00",integer:!0,change:e.changeMinPricePerUnit,disableToken:!0,disabled:e.isLoading}}):e._e()],1),e._v(" "),n("div",{staticClass:"d-flex align-self-center justify-content-between"},[n("div",{staticClass:"align-self-center font-body-small font-semibold ps-t-12"},[e._v("\n                      Total Price\n                    ")]),e._v(" "),n("div",{staticClass:"font-body-small font-semibold text-gray-500 ms-l-4 ps-t-12"},[e._v("\n                      "+e._s(e.minPriceInUSDFormatted)+"\n                    ")])]),e._v(" "),!e.dirty||(e.isErc721?e.validation.minPrice:e.validation.minPricePerUnit)?e._e():n("div",{staticClass:"w-100 font-caption error-text ps-t-4"},[e._v("\n                    Valid amount is required for minimum price\n                  ")])]):e._e()])],1):e._e(),e._v(" "),1===e.activeTab?n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 bottom-border d-flex"},[n("div",{staticClass:"d-flex align-self-center"},[n("div",{staticClass:"align-self-center font-heading-small font-semibold"},[e._v("\n                  Set Expiration Date\n                ")]),e._v(" "),n("svg-sprite-icon",{staticClass:"icon ms-l-4",attrs:{name:"questionmark-black"}})],1),e._v(" "),n("div",{staticClass:"d-flex ml-auto align-self-center"},[n("span",{staticClass:"time-pill font-body-small",class:{active:e.duration===e.EXPIRY_DURATION.ONE_WEEK},on:{click:function(t){return e.changeDuration(e.EXPIRY_DURATION.ONE_WEEK)}}},[e._v("1 week")]),e._v(" "),n("span",{staticClass:"time-pill font-body-small",class:{active:e.duration===e.EXPIRY_DURATION.ONE_MONTH},on:{click:function(t){return e.changeDuration(e.EXPIRY_DURATION.ONE_MONTH)}}},[e._v("1 month")]),e._v(" "),n("span",{staticClass:"time-pill font-body-small",class:{active:e.duration===e.EXPIRY_DURATION.CUSTOM},on:{click:function(t){return e.changeDuration(e.EXPIRY_DURATION.CUSTOM)}}},[e._v("Custom")])]),e._v(" "),n("div",{staticClass:"col-md-12 ps-x-0 ps-t-24"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.auction_date,expression:"auction_date"}],staticClass:"form-control form-control-inline float-left w-auto ps-y-0",attrs:{type:"date",min:e.minimumDate,change:e.onAuctionDateTimeChange()},domProps:{value:e.auction_date},on:{click:function(t){return e.toCustom()},input:function(t){t.target.composing||(e.auction_date=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.auction_time,expression:"auction_time"}],staticClass:"form-control form-control-inline float-right w-auto ps-y-0",attrs:{type:"time",change:e.onAuctionDateTimeChange()},domProps:{value:e.auction_time},on:{click:function(t){return e.toCustom()},input:function(t){t.target.composing||(e.auction_time=t.target.value)}}})])]):e._e(),e._v(" "),(e.dirty,e._e()),e._v(" "),n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 d-flex"},[n("button-loader",{attrs:{text:e.$t("cancel"),click:e.close,block:"",lg:"",color:"light",disabled:e.isLoading}}),e._v(" "),n("button-loader",{staticClass:"ml-auto",attrs:{loading:e.isLoading,loadingText:e.$t("submittingToMarketplace"),text:e.$t("submitToMarketplace"),block:"",lg:"",color:"primary",click:e.submitToMarketplace}})],1)])])])])]),e._v(" "),e.showApproveModal?n("approve-process",{attrs:{close:e.closeApproveModal,approveClicked:e.approveClickedFunc,signClicked:e.signClickedFunc,isApprovedStatus:e.isApprovedStatus,approveLoading:e.approveLoading,isSignedStatus:e.isSignedStatus,signLoading:e.signLoading,modalTexts:e.approvalModalText,networkChangeNeeded:e.showNetworkChangeNeeded}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-self-center"},[n("div",{staticClass:"align-self-center font-body-small font-semibold ps-t-12"},[e._v("\n                  Total Price\n                ")])])}],!1,null,"4431b33a",null);t.a=component.exports},2125:function(e,t,n){"use strict";n(1961)},2126:function(e,t,n){"use strict";n(1962)},2128:function(e,t,n){"use strict";n(66),n(46),n(56),n(83),n(84),n(65);var r,o=n(3),c=n(17),l=n(18),d=n(26),h=n(27),f=n(14),m=n(34),v=(n(328),n(227),n(181),n(42),n(30),n(2)),k=n(55),y=n(67),_=n(52),w=n.n(_),x=n(8),T=n(13),C=n(72),O=n(1830),A=n(1975),j=n(74),E=n(1831),S=(n(151),n(228));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function R(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I=n(1877).getTypedData,N=n(1859).ERC721TokenContract,L=Object(T.a)(0),M=Object(k.a)({props:{nftToken:{type:Object,required:!0},close:{type:Function,required:!0},refreshNFTTokens:{type:Function,required:!1,default:function(){}}},components:{Textfield:A.Textfield},computed:D(D(D(D(D({},Object(y.b)("token",["selectedERC20Token"])),Object(y.b)("account",["account"])),Object(y.b)("auth",["user"])),Object(y.b)("network",["networks","networkMeta"])),Object(y.b)("category",["categories"])),methods:{},mixins:[O.a]})(r=function(e){Object(d.a)(f,e);var t,n,r,h=P(f);function f(){var e;Object(c.a)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=h.call.apply(h,[this].concat(n))).isLoading=!1,e.dirty=!1,e.error="",e.toAddress=null,e.erc1155Amount=null,e}return Object(l.a)(f,[{key:"mounted",value:function(){this.$logger.track("mounted:transfer-token",this.nftToken)}},{key:"handleAddressInput",value:function(input){this.dirty=!1,this.toAddress=input}},{key:"handleERC1155Amount",value:function(input){this.dirty=!1,this.erc1155Amount=input}},{key:"metamaskValidation",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new w.a(window.ethereum),e.next=3,t.eth.getChainId();case 3:if(e.sent===this.networks.matic.chainId){e.next=7;break}return this.error="selectMatic",e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"transferToken",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c,l,d,data,h,f,m,v,k,y,_=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,this.$logger.track("click:transfer-token",{isValidAddress:this.isValidAddress,isValidOwner:this.validation.owner}),this.isValidAddress){e.next=7;break}return this.error=this.$t("invalid.address"),this.isLoading=!1,this.dirty=!0,e.abrupt("return",!1);case 7:if(this.validation.owner){e.next=12;break}return this.dirty=!0,this.error=this.$t("invalid.owner"),this.isLoading=!1,e.abrupt("return",!1);case 12:if(!this.isErc1155||this.validation.erc1155Amount){e.next=17;break}return this.error="invalidQuantity",this.isLoading=!1,this.dirty=!0,e.abrupt("return",!1);case 17:if(this.$logger.track("validations-passed:transfer-token",{isValidAddress:this.isValidAddress,isValidOwner:this.validation.owner}),this.dirty=!1,this.error="",e.prev=20,t=this.nftToken.category.getAddress(this.networks.matic.chainId),n=this.nftToken.token_id,r=null,o=null,!this.isErc721){e.next=39;break}return o=new N(t,Object(E.a)()),e.next=29,o.ownerOf(new T.a(n)).callAsync();case 29:if(c=e.sent,l=c.toLowerCase()===this.account.address.toLowerCase(),this.$logger.track("ownership-for-erc721:transfer-token",{isOwnerOfToken:l}),l){e.next=37;break}return Object(S.c)(null,"You are no owner of this token","You are no longer owner of this token, refresh to update the data"),this.isLoading=!1,this.close(),e.abrupt("return");case 37:e.next=40;break;case 39:r=this.erc1155Amount;case 40:if(!this.category.isMetaTx){e.next=78;break}if(d=new w.a(this.networks.matic.rpc),data=null,!this.isErc721){e.next=49;break}return e.next=46,d.eth.abi.encodeFunctionCall({name:"safeTransferFrom",type:"function",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}]},[this.account.address,this.toAddress,n]);case 46:data=e.sent,e.next=52;break;case 49:return e.next=51,d.eth.abi.encodeFunctionCall({name:"safeTransferFrom",type:"function",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"amount",type:"uint256"},{name:"data",type:"bytes"}]},[this.account.address,this.toAddress,n,r,"0x"]);case 51:data=e.sent;case 52:return this.$logger.track("meta-tx-signing:transfer-token",{data:data}),e.next=55,this.executeMetaTx(data);case 55:if(h=e.sent,f=h.sig,!(m={intent:f,fnSig:data,from:this.account.address,contractAddress:d.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===_.networks.matic.chainId})).address)})){e.next=76;break}return e.prev=59,this.$logger.track("service-call-execute-meta-tx:transfer-token"),e.next=63,Object(C.a)().post("orders/executeMetaTx",m);case 63:if(v=e.sent,this.refreshNFTTokens(),200!==v.status){e.next=70;break}return x.a.addToast("Transferred","You successfully transferred the token",{type:"success"}),this.close(),this.$logger.track("success-meta-tx:transfer-token"),e.abrupt("return",!0);case 70:e.next=76;break;case 72:e.prev=72,e.t0=e.catch(59),console.error(e.t0),Object(S.c)(null,"Failed to Transfer","Failed to transfer asset");case 76:e.next=111;break;case 78:return e.next=80,this.metamaskValidation();case 80:if(e.sent){e.next=83;break}return this.isLoading=!1,e.abrupt("return");case 83:if(this.$logger.track("non-meta-tx-start:transfer-token"),!this.isErc721){e.next=98;break}return e.next=87,o.safeTransferFrom1(this.account.address,this.toAddress,new T.a(n)).sendTransactionAsync({from:this.account.address,gas:1e6});case 87:if(!e.sent){e.next=95;break}return this.refreshNFTTokens(),setTimeout((function(){_.refreshNFTTokens()}),1e4),x.a.addToast("Transferred successfully","You successfully transferred the token",{type:"success"}),this.close(),this.$logger.track("success-non-meta-tx-ERC721:transfer-token"),e.abrupt("return",!0);case 95:Object(S.c)(error,"Failed to transfer","Failed to transfer token"),e.next=111;break;case 98:return k=new w.a(window.ethereum),y=new k.eth.Contract(this.networkMeta.abi("ChildERC1155","pos"),t),e.next=102,y.methods.safeTransferFrom(this.account.address,this.toAddress,n,r,"0x").send({from:this.account.address,gas:1e6});case 102:if(!e.sent){e.next=110;break}return this.refreshNFTTokens(),setTimeout((function(){_.refreshNFTTokens()}),1e4),x.a.addToast("Transferred successfully","You successfully transferred the token",{type:"success"}),this.close(),this.$logger.track("success-non-meta-tx-ERC1155:transfer-token"),e.abrupt("return",!0);case 110:Object(S.c)(error,"Failed to transfer","Failed to transfer token");case 111:e.next=117;break;case 113:e.prev=113,e.t1=e.catch(20),console.error(e.t1),e.t1.message.includes("MetaMask is having trouble connecting to the network")?Object(S.c)(e.t1,null,"Please Try Again"):Object(S.c)(e.t1,null,"Something went wrong");case 117:this.isLoading=!1;case 118:case"end":return e.stop()}}),e,this,[[20,113],[59,72]])}))),function(){return n.apply(this,arguments)})},{key:"executeMetaTx",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,address,data,r,o,c,l,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.a(this.networks.matic.rpc),address=n.utils.toChecksumAddress(this.account.address),e.next=4,n.eth.abi.encodeFunctionCall({name:"getNonce",type:"function",inputs:[{name:"user",type:"address"}]},[address]);case 4:return data=e.sent,e.next=7,n.eth.call({to:n.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===d.networks.matic.chainId})).address),data:data});case 7:return r=e.sent,o=I({name:this.category.name,version:"1",salt:x.a.uiconfig.SALT,verifyingContract:n.utils.toChecksumAddress(this.category.categoriesaddresses.find((function(e){return e.chain_id===d.networks.matic.chainId})).address),nonce:parseInt(r),from:address,functionSignature:t}),c=[address,JSON.stringify(o)],e.next=12,window.ethereum.request({method:"eth_signTypedData_v3",params:c});case 12:return l=e.sent,e.abrupt("return",{sig:l});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isValidAddress",get:function(){return this.toAddress&&Object(j.isValidAddress)(this.toAddress)}},{key:"childNetwork",get:function(){return this.networks.matic}},{key:"validation",get:function(){return{owner:this.nftToken.owner.toLowerCase()===this.account.address.toLowerCase(),erc1155Amount:!this.isErc1155||new T.a(this.erc1155Amount).lte(new T.a(this.nftToken.amount))&&new T.a(parseFloat(this.erc1155Amount)).eq(new T.a(parseInt(this.erc1155Amount)))&&new T.a(parseInt(this.erc1155Amount)).gt(L)}}},{key:"isErc1155",get:function(){return"ERC1155"===this.nftToken.type}},{key:"isErc721",get:function(){return"ERC721"===this.nftToken.type}},{key:"category",get:function(){var e=this;return this.categories.find((function(t){return t.address.toLowerCase()===e.nftToken.contract.toLowerCase()}))}}]),f}(v.default))||r,F=M,U=(n(2126),n(23)),component=Object(U.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section position-absolute"},[n("div",{staticClass:"modal-backdrop show"}),e._v(" "),n("div",{staticClass:"modal transaction-prog-modal show"},[n("div",{staticClass:"modal-dialog w-sm-100 align-self-center",attrs:{role:"document"}},[n("div",{staticClass:"box in-process-box"},[n("div",{staticClass:"box-body"},[n("div",{staticClass:"container-fluid"},[e._m(0),e._v(" "),n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 bottom-border"},[e.isErc1155?n("div",{staticClass:"d-flex align-self-center ps-b-8"},[n("div",{staticClass:"align-self-center font-heading-small font-semibold"},[e._v("\n                  Enter Quantity to sale\n                ")])]):e._e(),e._v(" "),e.isErc1155?n("div",{staticClass:"d-flex ml-auto align-self-center ps-b-8"},[n("div",{staticClass:"font-body-small text-gray-500 ms-l-4"},[e._v("\n                  Available : "+e._s(e.nftToken.amount)+"\n                ")])]):e._e(),e._v(" "),e.isErc1155?n("div",{staticClass:"col-md-12 p-0"},[e.isErc1155?n("Textfield",{attrs:{type:"text",placeholder:"0",value:e.erc1155Amount,disabled:e.isLoading},on:{input:e.handleERC1155Amount}}):e._e(),e._v(" "),e.dirty&&"invalidQuantity"===e.error?n("div",{staticClass:"w-100 font-caption error-text ps-t-12"},[e._v("\n                  Valid quantity is required\n                ")]):e._e(),e._v(" "),n("br")],1):e._e(),e._v(" "),n("div",{staticClass:"col-md-12 px-0 font-heading-small font-semibold ps-b-8"},[e._v("\n                Add address\n              ")]),e._v(" "),n("div",{staticClass:"col-md-12 px-0 ps-b-16 font-body-small text-gray-500"},[e._v("\n                Your asset will be transferred to this address.\n              ")]),e._v(" "),n("div",{staticClass:"col-md-12 p-0"},[n("Textfield",{attrs:{type:"text",placeholder:"Enter receiver address","hint-text":"Enter only matic network address",value:e.toAddress,disabled:e.isLoading},on:{input:e.handleAddressInput}}),e._v(" "),e.dirty||e.error?n("div",{staticClass:"w-100 font-caption error-text ps-t-12"},["selectMatic"===e.error?n("span",[e._v("\n                    Please select the "+e._s(e.childNetwork.name)+" Network in\n                    Metamask ("),n("a",{attrs:{href:"https://docs.matic.network/docs/develop/metamask/config-matic/#matic-mainnet",target:"_blank",rel:"noopener noreferrer"}},[e._v("guide")]),e._v(")\n                  ")]):e._e(),e._v(" "),"selectMatic"!==e.error&&"invalidQuantity"!==e.error?n("span",[e._v("\n                    "+e._s(e.error)+"\n                  ")]):e._e()]):e._e()],1)]),e._v(" "),(e.dirty,e._e()),e._v(" "),n("div",{staticClass:"row ps-x-16 ps-x-md-32 ps-x-lg-40 ps-y-32 d-flex"},[n("button-loader",{attrs:{text:e.$t("cancel"),click:e.close,block:"",lg:"",color:"light",disabled:e.isLoading}}),e._v(" "),n("button-loader",{staticClass:"ml-auto",attrs:{loading:e.isLoading,loadingText:e.$t("transferring"),text:e.$t("transfer"),block:"",lg:"",color:"primary",click:e.transferToken}})],1)])])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"row tabs nav bottom-border no-border-radius d-flex col-md-12 px-0 mx-0"},[n("a",{staticClass:"nav-item col ps-y-24 px-0 text-center nav-link font-body-medium font-medium active"},[e._v("Token Transfer")])])}],!1,null,"0276a4f2",null);t.a=component.exports},2408:function(e,t,n){},2409:function(e,t,n){},3423:function(e,t,n){"use strict";n(2408)},3424:function(e,t,n){"use strict";n(2409)},3432:function(e,t,n){"use strict";n.r(t);n(65);var r,o=n(17),c=n(18),l=n(26),d=n(27),h=n(14),f=n(2),m=n(55),v=(n(66),n(46),n(83),n(84),n(3)),k=n(34),y=(n(30),n(679),n(181),n(56),n(68),n(692),n(691),n(72)),_=n(8),w=n(67),x=n(1968),T=n(2412),C=n(2413),O=n(2411),A=n(2012),j=n(2128),E=n(2414),S=n(1804),P=n(1806),R=n.n(P);n(1831);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){Object(k.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L,M=new R.a,F=["gif","png","svg","jpg","jpeg"],U=Object(m.a)({props:{tokenId:{type:[Number,String],required:!1},chainId:{type:[Number,String],required:!1},contractAddress:{type:[Number,String],required:!1}},components:{TokenShortInfo:T.a,WishlistButton:C.a,BuyToken:O.a,SellToken:A.a,SendToken:j.a,CancelConfirm:E.a},computed:N(N(N(N({},Object(w.b)("category",["categories"])),Object(w.b)("token",["erc20Tokens"])),Object(w.b)("auth",["user"])),Object(w.b)("network",["networks"])),middleware:[],mixins:[]})(r=function(e){Object(l.a)(h,e);var t,n,r,d=D(h);function h(){var e;Object(o.a)(this,h);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=d.call.apply(d,[this].concat(n))).bg="#ffffff",e.showMore=!1,e.showCategoryInfo=!0,e.showProperties=!0,e.isLoadingDetails=!1,e.isLoading=!1,e.showSellModal=!1,e.showSendModal=!1,e.isNotVideoFormat=!1,e.token={},e}return Object(c.a)(h,[{key:"mounted",value:(r=Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchNFTTokens();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onImageLoad",value:function(){try{var img=this.$el.querySelector(".asset-img"),e=M.getColor(img);if(e){var t=Object(S.a)({r:e[0],g:e[1],b:e[2]});this.bg="hsl(".concat(t.h,",").concat(t.s,"%,").concat(t.l,"%)")}else this.bg="#ffffff"}catch(e){}}},{key:"imageLoadError",value:function(e){e.target.src=this.category.img_url,e.target.style.width="100px"}},{key:"onCloseSellModal",value:function(){this.showSellModal=!1}},{key:"onCloseSendModal",value:function(){this.showSendModal=!1}},{key:"onSellToken",value:function(){this.showSellModal=!0}},{key:"onTransferToken",value:function(){this.showSendModal=!0}},{key:"refreshNFTTokens",value:(n=Object(v.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$router.push({name:"account"});case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkImageFormat",value:function(e){var t=e.substr(e.lastIndexOf(".")+1);return!!F.includes(t)}},{key:"handleNotVideo",value:function(){var e=this,image=new Image;image.src=this.token.img_url,image.onload=function(){e.isNotVideoFormat=!0},image.onerror=function(){var image=document.createElement("img");image.src=e.category.img_url,document.querySelector(".feature-image").appendChild(image),image.style.width="200px",image.style.height="200px",image.classList.add("asset-img","align-self-center"),document.getElementsByTagName("VIDEO")[0].style.display="none"}}},{key:"category",get:function(){var e=this;return this.categories.filter((function(t){return t.id===e.token.categories_id}))[0]}},{key:"app",get:function(){return _.a}},{key:"tokenDescription",get:function(){return this.token.description}},{key:"tokenDescriptionFirstHalf",get:function(){return this.tokenDescription.slice(0,this.tokenDescription.length/2)}},{key:"tokenDescriptionSecondHalf",get:function(){return this.tokenDescription.slice(this.tokenDescription.length/2,this.tokenDescription.length)}},{key:"openseaUrl",get:function(){return"https://opensea.io/assets/matic/".concat(this.category.address,"/").concat(this.token.token_id)}},{key:"fetchNFTTokens",value:(t=Object(v.a)(regeneratorRuntime.mark((function e(){var t,n,data,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tokenId&&!this.isLoadingDetails){e.next=2;break}return e.abrupt("return");case 2:return this.isLoadingDetails=!0,e.prev=3,e.next=6,Object(y.a)().get("tokens/balance?userId=".concat(this.user.id,"&chainId=").concat(this.chainId));case 6:if(200!==(t=e.sent).status||!t.data.data){e.next=17;break}if(!((n=t.data.data.filter((function(e){return e.token_id===r.tokenId&&e.contract.match(new RegExp(r.contractAddress,"i"))}))).length>0)){e.next=13;break}n=n[0],e.next=14;break;case 13:return e.abrupt("return");case 14:n.chainId=this.chainId,data=new x.a(n),this.token=data;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:this.isLoadingDetails=!1;case 23:case"end":return e.stop()}}),e,this,[[3,19]])}))),function(){return t.apply(this,arguments)})}]),h}(f.default))||r,$=U,Y=(n(3423),n(23)),V=Object(Y.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.token.token_id&&!e.isLoadingDetails?r("div",{staticClass:"container-fluid ps-y-16"},[r("div",{staticClass:"row ps-y-16 ps-x-md-16 justify-content-between"},[r("div",{staticClass:"col-md-7 d-flex"},[e.category?r("token-short-info",{staticClass:"align-self-center",attrs:{order:e.token,category:e.category}}):e._e()],1),e._v(" "),r("a",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"View on OpenSea",expression:"'View on OpenSea'",modifiers:{left:!0}}],staticClass:"align-self-center ps-x-16 ps-x-md-0",attrs:{href:e.openseaUrl,rel:"noopener noreferrer",target:"_blank"}},[r("img",{staticClass:"opensea-icon ps-r-16",attrs:{src:n(2399),alt:"OS"}})])]),e._v(" "),r("div",{staticClass:"row ps-y-16 ps-x-md-16 justify-content-center"},[r("div",{staticClass:"col-md-8 h-100"},[r("div",{staticClass:"feature-image d-flex d-lg-flex justify-content-center mb-4",style:{background:e.bg}},[e.checkImageFormat(e.token.img_url)||e.isNotVideoFormat?r("img",{staticClass:"asset-img align-self-center",attrs:{src:e.token.img_url,alt:"Token Image"},on:{load:e.onImageLoad,error:e.imageLoadError}}):r("video",{attrs:{autoplay:"",muted:"",loop:"",height:"500px",poster:e.token.img_url},domProps:{muted:!0}},[r("source",{attrs:{src:e.token.img_url,type:"video/webm"}}),e._v(" "),r("source",{attrs:{src:e.token.img_url,type:"video/ogg"}}),e._v(" "),r("source",{attrs:{src:e.token.img_url,type:"video/mp4"},on:{error:e.handleNotVideo}})])]),e._v(" "),r("div",{staticClass:"details-section"},[r("div",{staticClass:"feature-info mobile d-flex d-lg-none flex-column ps-16 ps-lg-40 ms-y-16"},[r("h3",{staticClass:"font-heading-medium font-semibold"},[e._v("\n              About "+e._s(e.token.name)+"\n            ")]),e._v(" "),e.tokenDescription&&e.tokenDescription.length>200?r("p",{staticClass:"font-body-medium",class:{"show-less":e.showMore,"show-more":!e.showMore}},[e._v("\n              "+e._s(e.tokenDescription.slice(0,e.tokenDescription.length/2))+"\n              "),r("span",{staticClass:"dots"},[e._v("...")]),e._v(" "),r("span",{staticClass:"more"},[e._v(e._s(e.tokenDescription.slice(e.tokenDescription.length/2,e.tokenDescription.length)))]),e._v(" "),e.showMore?e._e():r("a",{staticClass:"font-body-small d-flex ps-t-8 font-medium",attrs:{href:"#more-info"},on:{click:function(t){t.preventDefault(),e.showMore=!0}}},[e._v("More info")]),e._v(" "),e.showMore?r("a",{staticClass:"font-body-small d-flex ps-t-8 font-medium",attrs:{href:"#more-info"},on:{click:function(t){t.preventDefault(),e.showMore=!1}}},[e._v("Show less")]):e._e()]):r("p",{staticClass:"font-body-medium"},[e._v("\n              "+e._s(e.tokenDescription)+"\n            ")]),e._v(" "),r("button",{staticClass:"btn btn-primary ms-t-32",on:{click:e.onSellToken}},[e._v("\n              "+e._s(e.$t("sell"))+"\n            ")]),e._v(" "),r("button",{staticClass:"btn btn-primary ms-t-16",on:{click:e.onTransferToken}},[e._v("\n              "+e._s(e.$t("transfer"))+"\n            ")])]),e._v(" "),e.category?r("div",{staticClass:"d-flex flex-column details-section--dropdown"},[r("div",{staticClass:"header-wrapper cursor-pointer py-4 ps-l-16",on:{click:function(t){e.showCategoryInfo=!e.showCategoryInfo}}},[r("h3",{staticClass:"font-heading-medium font-semibold category m-0"},[e._v("\n                About "+e._s(e.category.name)+"\n                "),r("a",{staticClass:"ps-l-12",attrs:{href:e.category.url,target:"_blank",rel:"noopener noreferrer"}},[e._v("Visit Website")]),e._v(" "),e.category.description?r("span",{staticClass:"float-right right-arrow",class:{"down-icon":e.showCategoryInfo}},[r("svg-sprite-icon",{attrs:{name:"right-arrow"}})],1):e._e()])]),e._v(" "),e.showCategoryInfo&&e.category.description?r("p",{staticClass:"font-body-medium ps-t-20 ps-l-16"},[e._v("\n              "+e._s(e.category.description)+"\n            ")]):e._e()]):e._e(),e._v(" "),e.token.token.attributes_metadata?r("div",{staticClass:"properties details-section--dropdown"},[r("div",{staticClass:"header-wrapper cursor-pointer py-4 ps-l-16",on:{click:function(t){e.showProperties=!e.showProperties}}},[r("h3",{staticClass:"font-heading-medium font-semibold m-0"},[e._v("\n                Properties\n                "),r("span",{staticClass:"float-right right-arrow",class:{"down-icon":e.showProperties}},[r("svg-sprite-icon",{attrs:{name:"right-arrow"}})],1)])]),e._v(" "),e.showProperties?r("div",{staticClass:"d-flex flex-row flex-wrap ps-t-16 ps-l-16"},e._l(e.token.token.attributes_metadata,(function(t){return r("div",{key:t.trait_type+"-"+t.value,staticClass:"col-md-3 p-0 pr-4 justify-content-between"},[r("div",{staticClass:"d-flex flex-column text-center properties-pill p-3 mb-4"},[r("p",{staticClass:"property-title m-0 p-0 text-truncate"},[e._v("\n                    "+e._s(e._f("pascal")(t.trait_type))+"\n                  ")]),e._v(" "),r("p",{staticClass:"property-detail m-0 pt-1 text-truncate"},["birthday"===t.trait_type?[e._v("\n                      "+e._s(e._f("date-human")(t.value))+"\n                    ")]:[e._v("\n                      "+e._s(e._f("pascal")(t.value))+"\n                    ")]],2)])])})),0):e._e()]):e._e()])]),e._v(" "),r("div",{staticClass:"col-md-4 d-none d-lg-flex h-100"},[r("div",{staticClass:"feature-info d-flex flex-column ps-16 ps-lg-40 w-100"},[r("h3",{staticClass:"font-heading-medium font-semibold"},[e._v("\n            About "+e._s(e.token.name)+"\n          ")]),e._v(" "),e.tokenDescription&&e.tokenDescription.length>200?r("p",{staticClass:"font-body-medium",class:{"show-less":e.showMore,"show-more":!e.showMore}},[e._v("\n            "+e._s(e.tokenDescriptionFirstHalf)+"\n            "),r("span",{staticClass:"dots"},[e._v("...")]),e._v(" "),r("span",{staticClass:"more"},[e._v(e._s(e.tokenDescriptionSecondHalf))]),e._v(" "),e.showMore?e._e():r("a",{staticClass:"font-body-small d-flex ps-t-8 font-medium",attrs:{href:"#more-info"},on:{click:function(t){t.preventDefault(),e.showMore=!0}}},[e._v("More info")]),e._v(" "),e.showMore?r("a",{staticClass:"font-body-small d-flex ps-t-8 font-medium",attrs:{href:"#more-info"},on:{click:function(t){t.preventDefault(),e.showMore=!1}}},[e._v("Show less")]):e._e()]):r("p",{staticClass:"font-body-medium"},[e._v("\n            "+e._s(e.tokenDescription)+"\n          ")]),e._v(" "),r("button",{staticClass:"btn btn-primary ms-t-32",on:{click:e.onSellToken}},[e._v("\n            "+e._s(e.$t("sell"))+"\n          ")]),e._v(" "),r("button",{staticClass:"btn btn-primary ms-t-16",on:{click:e.onTransferToken}},[e._v("\n            "+e._s(e.$t("transfer"))+"\n          ")])])])])]):e._e(),e._v(" "),r("div",{staticClass:"row ps-x-16 ps-y-120 d-flex justify-content-center text-center"},[e.isLoadingDetails?r("button-loader",{staticClass:"mx-auto",attrs:{loading:e.isLoadingDetails,loadingText:e.$t("loading"),text:e.$t("loadMore"),block:"",lg:"",color:"light"}}):e._e(),e._v(" "),e.showSellModal?r("sell-token",{staticClass:"text-left",attrs:{close:e.onCloseSellModal,nftToken:e.token,refreshNFTTokens:e.refreshNFTTokens}}):e._e(),e._v(" "),e.showSendModal?r("send-token",{staticClass:"text-left",attrs:{close:e.onCloseSendModal,nftToken:e.token,refreshNFTTokens:e.refreshNFTTokens}}):e._e()],1)])}),[],!1,null,"81df0226",null).exports;function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var H=Object(m.a)({props:{},components:{NftDetail:V},middleware:[],mixins:[]})(L=function(e){Object(l.a)(n,e);var t=B(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"contractAddress",get:function(){return this.$route.params.contractAddress}},{key:"tokenId",get:function(){return this.$route.params.tokenId}},{key:"chainId",get:function(){return this.$route.query.chainId}}]),n}(f.default))||L,X=H,W=(n(3424),Object(Y.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid p-0"},[e.chainId?n("nft-detail",{attrs:{tokenId:e.tokenId,chainId:e.chainId,contractAddress:e.contractAddress}}):e._e()],1)}),[],!1,null,"cf43ccb8",null));t.default=W.exports}}]);